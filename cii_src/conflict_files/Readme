chan.c can be compiled, but chan.o cannot be used because it depends on the thread.o, which is not compiled.

mem.c and memchk.c implement the same thing.
